# Dragonscale-Genkit Runtime

This project implements a Genkit Go application inspired by the LLMCompiler and Dragonscale concepts.
It provides an efficient runtime for executing task graphs (DAGs) generated by Large Language Models (LLMs).

## Architecture

- **Genkit Go:** Used for high-level flow orchestration, LLM interactions (planning, solving), observability, and deployment.
- **Core Executor (`internal/executor`):** Manages the execution of the DAG, including priority scheduling, concurrency, and state tracking.
- **Adapters (`internal/adapters`):** Connect Genkit flows and Go functions to the core interfaces (`Planner`, `Tool`, `Solver`, `Retriever`).
- **Tools (`internal/tools`):** Concrete implementations of actions the LLM can use (e.g., search, calculate).
- **Cache (`internal/cache`):** Simple in-memory cache for planner results.
- **Interfaces/Types (`pkg/dragonscale`):** Defines the core abstractions and data structures.

## Setup

1.  **Install Go:** Ensure you have Go 1.21 or later installed.
2.  **Set Environment Variables:**
    ```bash
    export GEMINI_API_KEY="YOUR_GEMINI_API_KEY"
    ```
3.  **Update `go.mod`:** Change the module path `github.com/ZanzyTHEbar/dragonscale-genkit` to your actual Go module path.
4.  **Tidy Dependencies:**
    ```bash
    go mod tidy
    ```
5.  **Install Genkit CLI:** Follow instructions at [https://firebase.google.com/docs/genkit/get-started](https://firebase.google.com/docs/genkit/get-started)

## Running Locally

1.  **Start Genkit Developer UI:**
    ```bash
    genkit start
    ```
    This command compiles and runs your `cmd/server/main.go`, starts the Genkit UI (usually on port 4000), and makes your flows available.

2.  **Run the Main Flow:** Use the Genkit UI or the CLI:
    ```bash
    genkit flow run dragonscaleGenkitFlow '{"data": "Search for the weather in Paris and then calculate 100/5."}'
    ```
    (Adjust the query as needed).

## Deployment

Use the Genkit CLI to deploy flows to supported targets like Google Cloud Functions:

```bash
# Ensure Firebase project is configured (genkit init)
genkit deploy
```
